<!--
  Generated template for the CoachingImprovmentFeedbackEditPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-button (click)="saveNback()">
                <ion-icon name="arrow-back"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title style="text-align: center;">Axis of improvment</ion-title>
        <ion-buttons slot="end">
            <ion-menu-button autoHide="false" menu="main"></ion-menu-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>
<ion-content (swipe)="onSwipe($event)">
    <ion-list>
        <ion-searchbar *ngIf="!readonly" [(ngModel)]="searchInput" [showCancelButton]="false" (ionChange)="onSearchBarInput($event)" tabindex="1" autofocus></ion-searchbar>
        <div *ngIf="pros && pros.length === 0" style="text-align: center; font-style: italic">No PRO found.</div>
        <ion-item-group *ngIf="!readonly && showProList" style="margin: 0 10px 25px 50px; border: 1px solid lightgray;">
            <ion-item *ngFor="let pro of pros">
                <ion-label (click)="proSelected($event, pro)" style="border: none;">{{pro.problemShortDesc}}</ion-label>
            </ion-item>
        </ion-item-group>

        <ion-item-group *ngIf="feedback">
            <ion-item-divider color="light">PRO</ion-item-divider>
            <ion-item>
                <ion-label fixed>Name</ion-label>
                <ion-input type="text" placeholder="Short description of the problem (Required)" [(ngModel)]="feedback.problemShortDesc" placeholder="short desc (required)" [readonly]="readonly"></ion-input>
            </ion-item>
            <ion-item>
                <ion-label fixed>Problem</ion-label>
                <ion-textarea placeholder="Description of the problem" rows="3" [(ngModel)]="feedback.problem" [readonly]="readonly" tabindex="2"></ion-textarea>
            </ion-item>
            <ion-item>
                <ion-label fixed>Remedy</ion-label>
                <ion-textarea placeholder="Description of the remedy" rows="3" [(ngModel)]="feedback.remedy" [readonly]="readonly" tabindex="3"></ion-textarea>
            </ion-item>
            <ion-item>
                <ion-label fixed>Outcome</ion-label>
                <ion-textarea placeholder="Description of the outcome" rows="3" [(ngModel)]="feedback.outcome" [readonly]="readonly" tabindex="4"></ion-textarea>
            </ion-item>
            <ion-item>
                <ion-label fixed>Skill</ion-label>
                <ion-input type="text" [(ngModel)]="feedback.skillName" [readonly]="readonly" tabindex="5"></ion-input>
            </ion-item>
        </ion-item-group>

        <ion-item-group *ngIf="feedback">
            <ion-item-divider color="light">Feedback</ion-item-divider>
            <ion-item>
                <ion-label fixed>Apply later</ion-label>
                <ion-input *ngIf="readonly" type="text" [readonly]="true" tabindex="6">{{feedback.appliedLater?'Yes':'No'}}</ion-input>
                <ion-toggle *ngIf="!readonly" [(ngModel)]="feedback.appliedLater" tabindex="6"></ion-toggle>
            </ion-item>
            <ion-item>
                <ion-label fixed>Priority</ion-label>
                <ion-input type="number" [(ngModel)]="feedback.priority" [readonly]="readonly" tabindex="7"></ion-input>
            </ion-item>
            <ion-item>
                <ion-label fixed>Period</ion-label>
                <ion-input type="number" [(ngModel)]="feedback.period" [readonly]="readonly" tabindex="8"></ion-input>
            </ion-item>
            <ion-item>
                <ion-label fixed>Deliver</ion-label>
                <ion-input *ngIf="readonly" type="text" [readonly]="true" tabindex="9">{{feedback.deliver?'Yes':'No'}}</ion-input>
                <ion-toggle *ngIf="!readonly" [(ngModel)]="feedback.deliver" tabindex="9"></ion-toggle>
            </ion-item>
        </ion-item-group>
    </ion-list>
    <div style="text-align: center; margin-bottom: 20px;">
        <ion-button shape="round" (click)="newPro($event)" *ngIf="feedback && feedback.problemShortDesc">Register PRO in library</ion-button>
        <ion-button shape="round" (click)="copyFeedbackToAnotherReferee($event)" *ngIf="!readonly && feedback && getOtherReferees().length > 0">Apply to others referees too</ion-button>
    </div>
</ion-content>